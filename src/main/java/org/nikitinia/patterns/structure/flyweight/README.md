# Легковес (Flyweight)
****
* [К описанию структурных шаблонов](../README.md)
****

## Тип
* Структурный шаблон;

## Назначение
* Оптимизировать виртуальную память исполнения программы за счет разделения общего
пространства между разными объектами, по сравнению с хранением каждого объекта 
своих атрибутов самостоятельно;

## Суть
* Когда в процессе работы программы используются объекты, имеющие много атрибутов 
и многочисленность используемых объектов приводит к торможению исполнения программы; 
* Эти объекты, как правило, содержат 2 типа атрибутов. Первый тип - динамически 
изменяемые в процессе исполнения, второй - статические атрибуты, содержащие 
общее состояние объекта. Такие объекты, разделяют на: легковесы - объекты с изменяемыми
атрибутами, контекст - объекты с неизменяемыми атрибутами.
* Так создается структура, в которой набор легковесов имеет общий 
переиспользуемый контекст;

## Контекст применения
* Длительное исполнение логики программы;

## Применимость
* Когда не хватает вычислительной мощности, необходимо оптимизировать исполнение программы;

## Какой функционал предоставляет
* Разделение объектов на легковесы и контекст;
## Преимущества и недостатки при использовании

| Преимущества                | Недостатки                                   |
|-----------------------------|----------------------------------------------|
| Экономия оперативной памяти | Усложнение структуры программы               |
|                             | Увеличение нагрузки на процессорные мощности |

## Алгоритм реализации

* Разделяем класс на 2 части;
  * Легковес (внутреннее состояние);
  * Контекст (внешнее состояние)
* Поля легковеса должны инициилизироваться в 
классе (через конструктор) и их значения должны быть неизменяемы;
* Поля контекста преобразуйте в параметры методов, где поля использовались;
* Создать [фабрику](../../creating/factorymethod/README.md) для кэширования и создания
объектов. Клиенты должны запрашивать объекты через фабрику.
* Клиенты должны хранить или вычислять значения контекста и передавать его в легковесы;

# Формулировка задачи

* В данной задаче мы будем работать с архивом конкретных документов. Допустим у нас есть
2 типа документов - записки (note) и приказы (order). Оба типа документов обладают 
параметрами используемых нами документов и уникальные собственные атрибуты. Для записок
это получатель, а для приказов компании. И получатель, и компания - 
произвольные строковые значения. 
В процессе работы необходимо оптимизировать работу с документами следующим образом - 
получатели и компании создаются однажды и все создаваемые во время исполнения программы 
записки и приказы должны направляться конкретным получателям. Получатель и компания
получают документ, складывают его в архив. Получаемые документы должны иметь произвольный 
номер. Во время исполнения программы нужно вывести в лог информацию о типе документа,
номере документа и конкретном получателе;